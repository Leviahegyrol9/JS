<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Átlag számító</title>
</head>
<body>
    <table>
        <thead>
            <tr>               
                <th>Tantárgyak</th>
                <th>Jegy</th>
                <th>Átlag</th>
            </tr>
        </thead>

        <tbody>
            <tr>
                <td><input type="text" id="subject"></td>
                <td><input type="text" id="marks"></td>
                <td id="average"></td>
                <td id="noBorder"><button id="addBtn">Add</button></td>
            </tr>
        </tbody>
    </table>


    <script>
        const addBTN = document.querySelector("#addBtn");
        const subject = document.querySelector("#subject");
        const mark = document.querySelector("#marks")
        const table = document.querySelector("table");
        const averageTd = document.querySelector("#average");
        var averages = [];

        addBTN.addEventListener("click", () =>{
            if (subject.value == "" || mark.value == ""){
                alert("A mezők üresek!")
            }
            else{
                AddItems();

                var allAverage = parseFloat(GetAverage(averages));

                averageTd.innerHTML = allAverage;
            }        
        })

        function AddItems() {
            var row = table.insertRow(-1);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);


            cell1.innerHTML = subject.value;
            var marks = mark.value.split(' ');
            cell2.innerHTML = mark.value;

            var average = parseFloat(GetAverage(marks));

            cell3.innerHTML = average;

            averages.push(average)
        }

        function GetAverage(array) {
            let sum = 0;

            array.forEach(num => {
                sum += parseFloat(num);
            });

            return `${(sum / array.length).toFixed(2)}`
        }
    </script>
</body>
</html>